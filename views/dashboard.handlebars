<section>
  <div class="profile-info">
    {{!-- logged in users username --}}
    <h2 class="your-post">Your Dashboard</h2>
  </div>

  <section class="add-post-modal">
    <button id="button" class="add-post-btn" data-modal="modalOne">New Post</button>
    <div id="modalOne" class="modal">
      <div class="modal-content card">
        <span class="close">&times;</span>
        <div class="card-header">Create New Post</div>
        <div class="card-body">
          <form class="new-post-form">
            <div>
              <label for="post-title">Title</label>
              <input type="text" id="post-title" name="post-title" />
            </div>
            <div>
              <label for="post-text">Content</label>
              <textarea id="post-text" name="post-text"></textarea>
            </div>
            <div>
              <select id="tag-dropdown" multiple="multiple">
                {{#each tags}}
                <option value="{{id}}">{{tag_text}}</option>
                {{/each}}
              </select>
            </div>
            <button type="submit" class="btn" id="post-btn">Create</button>
            <button type="reset" class="close" id="cancel">Cancel</button>
          </form>
          <form method="post" action="/api/upload" enctype="multipart/form-data">
          <input type="file" name="image" multiple/>
          <button type="submit">Upload</button> 
          </form>
        </div>
      </div>
    </div>
    <script>
      // Get the modal
      var modal = document.getElementById("modalOne");


      // Get the button that opens the modal
      var btn = document.getElementById("button");

      var closeBtn = document.getElementById("cancel");


      // Get the <span> element that closes the modal
      var span = document.getElementsByClassName("close")[0];

      // When the user clicks the button, open the modal 
      btn.onclick = function () {
        modal.style.display = "block";
      }

      // When the user clicks on <span> (x), close the modal
      span.onclick = function () {
        modal.style.display = "none";
      }

      closeBtn.onclick = function () {
        modal.style.display = "none";
      }

      // When the user clicks anywhere outside of the modal, close it
      window.onclick = function (event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
    </script>
  </section>

  {{#if posts.length}}
  <ol>
    {{#each posts as |post|}}
      {{> post-info-partials post}} 
    {{/each}}
  </ol>
</section>
{{/if}}

<script src="/javascript/add-post.js"></script>